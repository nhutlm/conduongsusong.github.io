<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tr·ª£ l√Ω tra c·ª©u BibleHub</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    /* N·ªÅn chung ki·ªÉu app: x√°m nh·∫°t */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #f3f4f6;
      margin: 0;
      padding: 0;
      color: #111827;
    }
    .container {
      max-width: 900px;
      margin: 24px auto;
      padding: 0 12px;
    }
    .header-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 16px 20px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.05);
      margin-bottom: 16px;
      border: 1px solid #e5e7eb;
    }
    h1 {
      font-size: 22px;
      margin: 0 0 8px;
      text-align: center;
    }
    .subtitle {
      font-size: 14px;
      color: #4b5563;
      text-align: center;
      margin: 0;
    }

    /* Th·∫ª b∆∞·ªõc (Step card) */
    .step-card {
      background: #f9fafb;
      border-radius: 16px;
      padding: 16px 18px;
      margin-top: 16px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }
    .step-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }
    .step-badge {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: #111827;
      color: #f9fafb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      flex-shrink: 0;
    }
    .step-title {
      font-size: 17px;
      font-weight: 600;
    }
    .step-description {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 10px;
    }

    p {
      line-height: 1.5;
      font-size: 14px;
    }
    .field {
      margin-bottom: 10px;
    }
    .field label {
      display: block;
      font-weight: 600;
      margin-bottom: 4px;
      font-size: 14px;
    }
    select, input[type="number"], input[type="text"] {
      width: 100%;
      padding: 8px 10px;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #d1d5db;
      box-sizing: border-box;
      background: #ffffff;
    }
    .inline {
      display: flex;
      gap: 10px;
    }
    .inline .field {
      flex: 1;
    }
    .radio-group, .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      font-size: 14px;
    }
    .radio-group label, .checkbox-group label {
      display: flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    button.primary {
      margin-top: 8px;
      width: 100%;
      padding: 10px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 999px;
      border: none;
      cursor: pointer;
      background: #2563eb;
      color: #ffffff;
      transition: background 0.15s, transform 0.05s, box-shadow 0.1s;
      box-shadow: 0 2px 6px rgba(37,99,235,0.35);
    }
    button.primary:hover {
      background: #1d4ed8;
    }
    button.primary:active {
      transform: scale(0.98);
      box-shadow: 0 1px 3px rgba(37,99,235,0.3);
    }

    button.secondary {
      margin-top: 6px;
      padding: 6px 10px;
      font-size: 13px;
      border-radius: 999px;
      border: 1px solid #9ca3af;
      background: #f9fafb;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }
    button.secondary:hover {
      background: #e5e7eb;
    }

    .note {
      font-size: 12.5px;
      color: #4b5563;
      margin-top: 4px;
    }
    .example {
      font-size: 12.5px;
      color: #6b7280;
      font-style: italic;
      margin-top: 2px;
    }

    .frame-wrapper {
      margin-top: 10px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #d1d5db;
      background: #ffffff;
    }
    #frameBiblehub, #frameStrong {
      width: 100%;
      height: 60vh;
      border: none;
    }
    #strongFrameWrapper {
      margin-top: 10px;
      border-radius: 12px;
      overflow: hidden;
      border: 1px solid #d1d5db;
      background: #ffffff;
    }

    @media (max-width: 600px) {
      .container {
        margin: 16px auto;
      }
      .header-card {
        padding: 12px 14px;
      }
      h1 {
        font-size: 18px;
      }
      .step-card {
        padding: 12px 14px;
      }
      button.primary {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Ph·∫ßn ti√™u ƒë·ªÅ -->
    <div class="header-card">
      <h1>Tr·ª£ l√Ω tra c·ª©u BibleHub</h1>
      <p class="subtitle">
        Xem c√¢u Kinh Th√°nh tr√™n BibleHub, sau ƒë√≥ tra nghƒ©a Strong v√† b·∫£n d·ªãch ti·∫øng Vi·ªát m·ªôt c√°ch ƒë∆°n gi·∫£n.
      </p>
    </div>

    <!-- B∆Ø·ªöC 1 -->
    <div class="step-card">
      <div class="step-header">
        <div class="step-badge">1</div>
        <div class="step-title">Ch·ªçn c√¢u Kinh Th√°nh ƒë·ªÉ xem tr√™n BibleHub</div>
      </div>
      <p class="step-description">
        Ch·ªçn s√°ch, ch∆∞∆°ng, c√¢u v√† c√°ch xem (Interlinear ƒë·ªÉ th·∫•y m√£ Strong). C√¢u s·∫Ω hi·ªÉn th·ªã trong khung ph√≠a d∆∞·ªõi khi b·∫°n b·∫•m n√∫t.
      </p>

      <div class="field">
        <label for="bookSelect">S√°ch</label>
        <select id="bookSelect">
          <option value="">-- Ch·ªçn s√°ch --</option>
          <optgroup label="C·ª±u ∆Ø·ªõc">
            <option value="genesis">S√°ng Th·∫ø K√Ω</option>
            <option value="exodus">Xu·∫•t √ä-d√≠p-t√¥ K√Ω</option>
            <option value="leviticus">L√™-vi K√Ω</option>
            <option value="numbers">D√¢n S·ªë K√Ω</option>
            <option value="deuteronomy">Ph·ª•c Truy·ªÅn Lu·∫≠t L·ªá K√Ω</option>
            <option value="joshua">Gi√¥-su√™</option>
            <option value="judges">C√°c Quan X√©t</option>
            <option value="ruth">Ru-t∆°</option>
            <option value="1_samuel">I Sa-mu-√™n</option>
            <option value="2_samuel">II Sa-mu-√™n</option>
            <option value="1_kings">I C√°c Vua</option>
            <option value="2_kings">II C√°c Vua</option>
            <option value="1_chronicles">I S·ª≠ K√Ω</option>
            <option value="2_chronicles">II S·ª≠ K√Ω</option>
            <option value="ezra">√ä-x∆°-ra</option>
            <option value="nehemiah">N√™-h√™-mi</option>
            <option value="esther">√ä-x∆°-t√™</option>
            <option value="job">Gi√≥p</option>
            <option value="psalms">Thi Thi√™n</option>
            <option value="proverbs">Ch√¢m Ng√¥n</option>
            <option value="ecclesiastes">Truy·ªÅn ƒê·∫°o</option>
            <option value="song_of_solomon">Nh√£ Ca</option>
            <option value="isaiah">√ä-sai</option>
            <option value="jeremiah">Gi√™-r√™-mi</option>
            <option value="lamentations">Ca Th∆∞∆°ng</option>
            <option value="ezekiel">√ä-x√™-chi-√™n</option>
            <option value="daniel">ƒêa-ni-√™n</option>
            <option value="hosea">√î-s√™</option>
            <option value="joel">Gi√¥-√™n</option>
            <option value="amos">A-m·ªët</option>
            <option value="obadiah">√Åp-ƒëia</option>
            <option value="jonah">Gi√¥-na</option>
            <option value="micah">Mi-ch√™</option>
            <option value="nahum">Na-hum</option>
            <option value="habakkuk">Ha-ba-c√∫c</option>
            <option value="zephaniah">S√¥-ph√¥-ni</option>
            <option value="haggai">A-gh√™</option>
            <option value="zechariah">Xa-cha-ri</option>
            <option value="malachi">Ma-la-chi</option>
          </optgroup>
          <optgroup label="T√¢n ∆Ø·ªõc">
            <option value="matthew">Ma-thi-∆°</option>
            <option value="mark">M√°c</option>
            <option value="luke">Lu-ca</option>
            <option value="john">GiƒÉng</option>
            <option value="acts">C√¥ng V·ª• C√°c S·ª© ƒê·ªì</option>
            <option value="romans">R√¥-ma</option>
            <option value="1_corinthians">I C√¥-rinh-t√¥</option>
            <option value="2_corinthians">II C√¥-rinh-t√¥</option>
            <option value="galatians">Ga-la-ti</option>
            <option value="ephesians">√ä-ph√™-s√¥</option>
            <option value="philippians">Phi-lip</option>
            <option value="colossians">C√¥-l√¥-se</option>
            <option value="1_thessalonians">I T√™-sa-l√¥-ni-ca</option>
            <option value="2_thessalonians">II T√™-sa-l√¥-ni-ca</option>
            <option value="1_timothy">I Ti-m√¥-th√™</option>
            <option value="2_timothy">II Ti-m√¥-th√™</option>
            <option value="titus">T√≠t</option>
            <option value="philemon">Phi-l√™-m√¥n</option>
            <option value="hebrews">H√™-b∆°-r∆°</option>
            <option value="james">Gia-c∆°</option>
            <option value="1_peter">I Phi-e-r∆°</option>
            <option value="2_peter">II Phi-e-r∆°</option>
            <option value="1_john">I GiƒÉng</option>
            <option value="2_john">II GiƒÉng</option>
            <option value="3_john">III GiƒÉng</option>
            <option value="jude">Giu-ƒëe</option>
            <option value="revelation">Kh·∫£i Huy·ªÅn</option>
          </optgroup>
        </select>
        <div class="example">
          V√≠ d·ª•: √ä-sai 40:31 ‚Üí ch·ªçn ‚Äú√ä-sai‚Äù, ch∆∞∆°ng 40, c√¢u 31.
        </div>
      </div>

      <div class="inline">
        <div class="field">
          <label for="chapterInput">Ch∆∞∆°ng</label>
          <input id="chapterInput" type="number" min="1" />
        </div>
        <div class="field">
          <label for="verseInput">C√¢u</label>
          <input id="verseInput" type="number" min="1" />
        </div>
      </div>

      <div class="field">
        <label>C√°ch xem tr√™n BibleHub</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="viewType" value="interlinear" checked />
            Interlinear (nguy√™n vƒÉn + Strong)
          </label>
          <label>
            <input type="radio" name="viewType" value="text" />
            VƒÉn b·∫£n th∆∞·ªùng (b·∫£n ti·∫øng Anh)
          </label>
        </div>
      </div>

      <button class="primary" onclick="loadBiblehubVerse()">Hi·ªÉn th·ªã c√¢u n√†y trong khung b√™n d∆∞·ªõi</button>
      <div class="note">
        Sau khi hi·ªán, b·∫°n c√≥ th·ªÉ d√πng hai ng√≥n tay ƒë·ªÉ ph√≥ng to/thu nh·ªè tr√™n ƒëi·ªán tho·∫°i.
      </div>

      <div class="field" style="margin-top:10px;">
        <button class="secondary" type="button" onclick="openVerseTranslated()">
          üåê M·ªü b·∫£n d·ªãch ti·∫øng Vi·ªát c·ªßa c√¢u n√†y trong tab m·ªõi
        </button>
        <div class="note">
          N√∫t n√†y s·∫Ω m·ªü trang BibleHub c·ªßa c√¢u ƒëang ch·ªçn, b·ªçc qua Google D·ªãch (ti·∫øng Vi·ªát), trong m·ªôt tab m·ªõi.
        </div>
      </div>

      <!-- Iframe ch·ªâ hi·ªÉn th·ªã sau khi b·∫•m n√∫t -->
      <div class="frame-wrapper" id="biblehubFrameWrapper" style="display:none;">
        <iframe id="frameBiblehub" title="BibleHub viewer"></iframe>
      </div>
    </div>

    <!-- B∆Ø·ªöC 2 -->
    <div class="step-card">
      <div class="step-header">
        <div class="step-badge">2</div>
        <div class="step-title">Tra m√£ Strong v√† xem nghƒ©a (c√≥ d·ªãch ti·∫øng Vi·ªát)</div>
      </div>
      <p class="step-description">
        Trong khung B∆∞·ªõc 1, t√¨m m√£ Strong (Hxxxx ho·∫∑c Gxxxx). Nh·∫•n gi·ªØ ƒë·ªÉ Copy, sau ƒë√≥ b·∫•m n√∫t ‚ÄúD√°n m√£ Strong‚Äù
        ƒë·ªÉ t·ª± ƒëi·ªÅn v√†o √¥, r·ªìi tra nghƒ©a b·∫±ng ti·∫øng Vi·ªát ho·∫∑c ti·∫øng Anh.
      </p>

      <div class="field">
        <label for="strongInput">M√£ Strong</label>
        <input id="strongInput" type="text" placeholder="V√≠ d·ª•: H3068, G25 ho·∫∑c 3068" />
        <button class="secondary" type="button" onclick="pasteStrongFromClipboard()">
          üìã D√°n m√£ Strong v·ª´a copy
        </button>
        <div class="example">
          Tr√™n ƒëi·ªán tho·∫°i: nh·∫•n gi·ªØ v√†o m√£ Strong trong khung tr√™n ‚Üí Copy ‚Üí b·∫•m n√∫t ‚ÄúD√°n m√£ Strong‚Äù.
        </div>
      </div>

      <div class="field">
        <label>Thu·ªôc v·ªÅ</label>
        <div class="radio-group">
          <label>
            <input type="radio" name="strongTestament" value="hebrew" checked />
            C·ª±u ∆Ø·ªõc (Hebrew - H)
          </label>
          <label>
            <input type="radio" name="strongTestament" value="greek" />
            T√¢n ∆Ø·ªõc (Greek - G)
          </label>
        </div>
        <div class="note">
          Gi√° tr·ªã n√†y s·∫Ω t·ª± ƒë·ªïi theo s√°ch ·ªü B∆∞·ªõc 1 (C·ª±u ∆Ø·ªõc / T√¢n ∆Ø·ªõc), nh∆∞ng b·∫°n v·∫´n c√≥ th·ªÉ ch·ªânh tay n·∫øu c·∫ßn.
        </div>
      </div>

      <div class="field">
        <div class="checkbox-group">
          <label>
            <input type="checkbox" id="strongInNewTab" checked />
            M·ªü nghƒ©a Strong (ƒë√£ d·ªãch ti·∫øng Vi·ªát) trong tab m·ªõi
          </label>
        </div>
        <div class="note">
          N·∫øu b·ªè ch·ªçn, nghƒ©a Strong b·∫£n ti·∫øng Anh s·∫Ω hi·ªÉn th·ªã trong khung b√™n d∆∞·ªõi.
        </div>
      </div>

      <button class="primary" onclick="openStrongMeaning()">Xem nghƒ©a + (tu·ª≥ ch·ªçn) d·ªãch ti·∫øng Vi·ªát</button>
      <div class="note">
        Nghƒ©a Strong ƒë∆∞·ª£c l·∫•y t·ª´ BibleHub. Khi m·ªü tab m·ªõi, trang ƒë√≥ s·∫Ω ƒë∆∞·ª£c b·ªçc qua Google D·ªãch sang ti·∫øng Vi·ªát.
      </div>

      <div id="strongFrameWrapper" style="display:none;">
        <iframe id="frameStrong" title="Strong meaning viewer"></iframe>
      </div>
    </div>
  </div>

  <script>
    // Danh s√°ch s√°ch T√¢n ∆Ø·ªõc (d√πng ƒë·ªÉ t·ª± set radio Strong)
    const NEW_TESTAMENT_BOOKS = [
      "matthew","mark","luke","john","acts","romans",
      "1_corinthians","2_corinthians","galatians","ephesians",
      "philippians","colossians","1_thessalonians","2_thessalonians",
      "1_timothy","2_timothy","titus","philemon","hebrews","james",
      "1_peter","2_peter","1_john","2_john","3_john","jude","revelation"
    ];

    // C·∫≠p nh·∫≠t radio C·ª±u/T√¢n ∆Ø·ªõc d·ª±a tr√™n s√°ch ƒë√£ ch·ªçn
    function updateTestamentFromBook() {
      const book = document.getElementById("bookSelect").value;
      const hebrewRadio = document.querySelector('input[name="strongTestament"][value="hebrew"]');
      const greekRadio = document.querySelector('input[name="strongTestament"][value="greek"]');

      if (!book) {
        // Kh√¥ng bi·∫øt s√°ch, gi·ªØ nguy√™n l·ª±a ch·ªçn hi·ªán t·∫°i (m·∫∑c ƒë·ªãnh C·ª±u ∆Ø·ªõc l√† H)
        return;
      }

      if (NEW_TESTAMENT_BOOKS.includes(book)) {
        if (greekRadio) greekRadio.checked = true;
      } else {
        if (hebrewRadio) hebrewRadio.checked = true;
      }
    }

    // G·∫Øn event khi ch·ªçn s√°ch
    document.addEventListener("DOMContentLoaded", () => {
      const bookSelect = document.getElementById("bookSelect");
      if (bookSelect) {
        bookSelect.addEventListener("change", updateTestamentFromBook);
      }
    });

    // B∆Ø·ªöC 1: T·∫£i c√¢u Kinh Th√°nh v√†o khung BibleHub (ti·∫øng Anh)
    function loadBiblehubVerse() {
      const book = document.getElementById("bookSelect").value;
      const chapter = document.getElementById("chapterInput").value.trim();
      const verse = document.getElementById("verseInput").value.trim();

      if (!book) {
        alert("Vui l√≤ng ch·ªçn s√°ch.");
        return;
      }
      if (!chapter || parseInt(chapter, 10) <= 0) {
        alert("Vui l√≤ng nh·∫≠p ch∆∞∆°ng (s·ªë > 0).");
        return;
      }
      if (!verse || parseInt(verse, 10) <= 0) {
        alert("Vui l√≤ng nh·∫≠p c√¢u (s·ªë > 0).");
        return;
      }

      const viewType = document.querySelector('input[name="viewType"]:checked').value;
      let url = "";

      if (viewType === "interlinear") {
        url = `https://biblehub.com/interlinear/${book}/${chapter}-${verse}.htm`;
      } else {
        url = `https://biblehub.com/${book}/${chapter}-${verse}.htm`;
      }

      const wrapper = document.getElementById("biblehubFrameWrapper");
      const frame = document.getElementById("frameBiblehub");
      if (wrapper) {
        wrapper.style.display = "block"; // hi·ªán khung khi b·∫•m n√∫t
      }
      frame.src = url;

      wrapper.scrollIntoView({ behavior: "smooth", block: "start" });
    }

    // B∆Ø·ªöC 1: M·ªü b·∫£n d·ªãch ti·∫øng Vi·ªát c·ªßa c√¢u trong tab m·ªõi (Google D·ªãch)
    function openVerseTranslated() {
      const book = document.getElementById("bookSelect").value;
      const chapter = document.getElementById("chapterInput").value.trim();
      const verse = document.getElementById("verseInput").value.trim();

      if (!book || !chapter || !verse) {
        alert("Vui l√≤ng ch·ªçn ƒë·∫ßy ƒë·ªß s√°ch, ch∆∞∆°ng, c√¢u ·ªü B∆∞·ªõc 1 tr∆∞·ªõc.");
        return;
      }

      const viewType = document.querySelector('input[name="viewType"]:checked').value;
      let baseUrl = "";

      if (viewType === "interlinear") {
        baseUrl = `https://biblehub.com/text/${book}/${chapter}-${verse}.htm`;
      } else {
        baseUrl = `https://biblehub.com/${book}/${chapter}-${verse}.htm`;
      }

      const translatedUrl =
        "https://translate.google.com/translate?sl=en&tl=vi&u=" +
        encodeURIComponent(baseUrl);

      window.open(translatedUrl, "_blank");
    }

    // B∆Ø·ªöC 2: D√°n m√£ Strong t·ª´ clipboard v√†o √¥ nh·∫≠p
    async function pasteStrongFromClipboard() {
      if (!navigator.clipboard || !navigator.clipboard.readText) {
        alert("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ d√°n t·ª´ clipboard. Vui l√≤ng d√°n th·ªß c√¥ng (nh·∫•n gi·ªØ ‚Üí D√°n).");
        return;
      }
      try {
        const text = (await navigator.clipboard.readText()) || "";
        if (!text.trim()) {
          alert("Kh√¥ng th·∫•y n·ªôi dung n√†o trong clipboard. H√£y copy l·∫°i m√£ Strong r·ªìi th·ª≠ l·∫ßn n·ªØa.");
          return;
        }
        document.getElementById("strongInput").value = text.toUpperCase();
      } catch (err) {
        alert("Kh√¥ng ƒë·ªçc ƒë∆∞·ª£c clipboard. C√≥ th·ªÉ tr√¨nh duy·ªát ch·∫∑n quy·ªÅn n√†y. B·∫°n h√£y d√°n th·ªß c√¥ng v√†o √¥.");
      }
    }

    // B∆Ø·ªöC 2: M·ªü nghƒ©a Strong (tab m·ªõi: Vi·ªát; iframe: Anh)
    function openStrongMeaning() {
      let strong = document.getElementById("strongInput").value.trim().toUpperCase();
      if (!strong) {
        alert("Vui l√≤ng nh·∫≠p ho·∫∑c d√°n m√£ Strong, v√≠ d·ª•: H3068, G25 ho·∫∑c 3068.");
        return;
      }

      // L·∫•y ph·∫ßn s·ªë (b·ªè H/G n·∫øu c√≥)
      const number = strong.replace(/[^\d]/g, "");
      if (!number) {
        alert("Kh√¥ng nh·∫≠n di·ªán ƒë∆∞·ª£c s·ªë Strong. Vui l√≤ng ki·ªÉm tra l·∫°i.");
        return;
      }

      // L·∫•y l·ª±a ch·ªçn C·ª±u/T√¢n ∆Ø·ªõc t·ª´ radio (m·∫∑c ƒë·ªãnh C·ª±u ∆Ø·ªõc)
      const testamentRadio = document.querySelector('input[name="strongTestament"]:checked');
      let testament = "hebrew";
      if (testamentRadio && (testamentRadio.value === "hebrew" || testamentRadio.value === "greek")) {
        testament = testamentRadio.value;
      }

      const baseUrl = `https://biblehub.com/text/${testament}/${number}.htm`;

      // URL ƒë√£ b·ªçc qua Google D·ªãch (d√πng cho tab m·ªõi)
      const translatedUrl =
        "https://translate.google.com/translate?sl=en&tl=vi&u=" +
        encodeURIComponent(baseUrl);

      const openInNewTab = document.getElementById("strongInNewTab").checked;

      if (openInNewTab) {
        // M·ªü nghƒ©a Strong trong tab m·ªõi (ƒë√£ d·ªãch ti·∫øng Vi·ªát)
        window.open(translatedUrl, "_blank");
      } else {
        // Hi·ªÉn th·ªã nghƒ©a Strong b·∫£n ti·∫øng Anh trong iframe
        const wrapper = document.getElementById("strongFrameWrapper");
        const frameStrong = document.getElementById("frameStrong");
        wrapper.style.display = "block";
        frameStrong.src = baseUrl;
        wrapper.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  </script>
</body>
</html>
